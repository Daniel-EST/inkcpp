<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>inkcpp: ink::runtime::story Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">inkcpp
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceink.html">ink</a></li><li class="navelem"><a class="el" href="namespaceink_1_1runtime.html">runtime</a></li><li class="navelem"><a class="el" href="classink_1_1runtime_1_1story.html">story</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classink_1_1runtime_1_1story-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ink::runtime::story Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>A loaded ink story.  
 <a href="classink_1_1runtime_1_1story.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="story_8h_source.html">story.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac9a48e930c85ed58c0d2f6bbe89c9b62"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classink_1_1runtime_1_1story__ptr.html">globals</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classink_1_1runtime_1_1story.html#ac9a48e930c85ed58c0d2f6bbe89c9b62">new_globals</a> ()=0</td></tr>
<tr class="memdesc:ac9a48e930c85ed58c0d2f6bbe89c9b62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new global store.  <a href="classink_1_1runtime_1_1story.html#ac9a48e930c85ed58c0d2f6bbe89c9b62">More...</a><br /></td></tr>
<tr class="separator:ac9a48e930c85ed58c0d2f6bbe89c9b62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33faf391f46be2e89d5f0d2dc7669ecf"><td class="memItemLeft" align="right" valign="top"><a id="a33faf391f46be2e89d5f0d2dc7669ecf"></a>
virtual <a class="el" href="classink_1_1runtime_1_1story__ptr.html">globals</a>&#160;</td><td class="memItemRight" valign="bottom"><b>new_globals_from_snapshot</b> (const <a class="el" href="classink_1_1runtime_1_1snapshot.html">snapshot</a> &amp;)=0</td></tr>
<tr class="separator:a33faf391f46be2e89d5f0d2dc7669ecf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0bcc61fba0c879979d334cca8e21f16"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classink_1_1runtime_1_1story__ptr.html">runner</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classink_1_1runtime_1_1story.html#ab0bcc61fba0c879979d334cca8e21f16">new_runner</a> (<a class="el" href="classink_1_1runtime_1_1story__ptr.html">globals</a> store=nullptr)=0</td></tr>
<tr class="memdesc:ab0bcc61fba0c879979d334cca8e21f16"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new runner.  <a href="classink_1_1runtime_1_1story.html#ab0bcc61fba0c879979d334cca8e21f16">More...</a><br /></td></tr>
<tr class="separator:ab0bcc61fba0c879979d334cca8e21f16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac17fb51b7a165b36a4de1ece4d80d5f1"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classink_1_1runtime_1_1story__ptr.html">runner</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classink_1_1runtime_1_1story.html#ac17fb51b7a165b36a4de1ece4d80d5f1">new_runner_from_snapshot</a> (const <a class="el" href="classink_1_1runtime_1_1snapshot.html">snapshot</a> &amp;, <a class="el" href="classink_1_1runtime_1_1story__ptr.html">globals</a> store=nullptr, unsigned idx=0)=0</td></tr>
<tr class="memdesc:ac17fb51b7a165b36a4de1ece4d80d5f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">reconstruct runner from a snapshot  <a href="classink_1_1runtime_1_1story.html#ac17fb51b7a165b36a4de1ece4d80d5f1">More...</a><br /></td></tr>
<tr class="separator:ac17fb51b7a165b36a4de1ece4d80d5f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:afaaa2adae680a66120aef5e0ff8b7b50"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classink_1_1runtime_1_1story.html">story</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classink_1_1runtime_1_1story.html#afaaa2adae680a66120aef5e0ff8b7b50">from_file</a> (const char *filename)</td></tr>
<tr class="memdesc:afaaa2adae680a66120aef5e0ff8b7b50"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new story object from a file.  <a href="classink_1_1runtime_1_1story.html#afaaa2adae680a66120aef5e0ff8b7b50">More...</a><br /></td></tr>
<tr class="separator:afaaa2adae680a66120aef5e0ff8b7b50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22bb40af1b9d2f168641f25ff780d641"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classink_1_1runtime_1_1story.html">story</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classink_1_1runtime_1_1story.html#a22bb40af1b9d2f168641f25ff780d641">from_binary</a> (unsigned char *data, size_t length, bool freeOnDestroy=true)</td></tr>
<tr class="memdesc:a22bb40af1b9d2f168641f25ff780d641"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new story object from binary buffer.  <a href="classink_1_1runtime_1_1story.html#a22bb40af1b9d2f168641f25ff780d641">More...</a><br /></td></tr>
<tr class="separator:a22bb40af1b9d2f168641f25ff780d641"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A loaded ink story. </p>
<p>Created by loading a binary ink story into memory. Once loaded, the story class can create "runners" which execute story code. A story can have any number of runners, which can optionally share globals (variables, visit counts, etc). through the globals object. By default, each runner gets its own newly created globals store. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="classink_1_1runtime_1_1runner__interface.html" title="A runner to execute ink script from a story.">runner_interface</a> </dd>
<dd>
<a class="el" href="classink_1_1runtime_1_1globals__interface.html" title="Represents a global store to be shared amongst ink runners.">globals_interface</a> </dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a22bb40af1b9d2f168641f25ff780d641"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22bb40af1b9d2f168641f25ff780d641">&#9670;&nbsp;</a></span>from_binary()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classink_1_1runtime_1_1story.html">story</a>* ink::runtime::story::from_binary </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>freeOnDestroy</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a new story object from binary buffer. </p>
<p>No extensions required. Creates the story from binary data already loaded into memory. By default, the story will free this buffer when it is destroyed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>binary data </td></tr>
    <tr><td class="paramname">length</td><td>of the binary data in bytes </td></tr>
    <tr><td class="paramname">freeOnDestroy</td><td>if true, free this buffer once the story is destroyed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>new story object </dd></dl>

</div>
</div>
<a id="afaaa2adae680a66120aef5e0ff8b7b50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afaaa2adae680a66120aef5e0ff8b7b50">&#9670;&nbsp;</a></span>from_file()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classink_1_1runtime_1_1story.html">story</a>* ink::runtime::story::from_file </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a new story object from a file. </p>
<p>Requires STL or other extension which allows files to be loaded and read. Will allocate all the data necessary to load the file and close it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>filename of the binary ink data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>new story object </dd></dl>

</div>
</div>
<a id="ac9a48e930c85ed58c0d2f6bbe89c9b62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9a48e930c85ed58c0d2f6bbe89c9b62">&#9670;&nbsp;</a></span>new_globals()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classink_1_1runtime_1_1story__ptr.html">globals</a> ink::runtime::story::new_globals </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a new global store. </p>
<p>Creates a new global store that can be passed in when creating new runners for this story. Note: Can not be used for other stories. It is tied to this story.</p>
<dl class="section return"><dt>Returns</dt><dd>managed pointer to a new global store </dd></dl>

</div>
</div>
<a id="ab0bcc61fba0c879979d334cca8e21f16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0bcc61fba0c879979d334cca8e21f16">&#9670;&nbsp;</a></span>new_runner()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classink_1_1runtime_1_1story__ptr.html">runner</a> ink::runtime::story::new_runner </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classink_1_1runtime_1_1story__ptr.html">globals</a>&#160;</td>
          <td class="paramname"><em>store</em> = <code>nullptr</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a new runner. </p>
<p>Creates a new runner whose initial instruction pointer is the first instruction in this story. If no global store is passed, a new one will be created for the runner.</p>
<dl class="section return"><dt>Returns</dt><dd>managed pointer to a new runner </dd></dl>

</div>
</div>
<a id="ac17fb51b7a165b36a4de1ece4d80d5f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac17fb51b7a165b36a4de1ece4d80d5f1">&#9670;&nbsp;</a></span>new_runner_from_snapshot()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classink_1_1runtime_1_1story__ptr.html">runner</a> ink::runtime::story::new_runner_from_snapshot </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classink_1_1runtime_1_1snapshot.html">snapshot</a> &amp;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classink_1_1runtime_1_1story__ptr.html">globals</a>&#160;</td>
          <td class="paramname"><em>store</em> = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>idx</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>reconstruct runner from a snapshot </p>
<dl class="section attention"><dt>Attention</dt><dd>runner must be snap_shotted from the same story </dd>
<dd>
if globals is explicit set, make sure the globals are from the same snapshot as </dd>
<dd>
if you snap_shotted a multiple runner with shared global please reconstruct it in the same fashion </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">store</td><td>can be set if explicit access to globals is required or multiple runner with a shared global are used </td></tr>
    <tr><td class="paramname">idx</td><td>if the snapshot was of a multiple runner one global situation load first the global, and then each runner with global set and increasing idx </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>inkcpp/include/<a class="el" href="story_8h_source.html">story.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
